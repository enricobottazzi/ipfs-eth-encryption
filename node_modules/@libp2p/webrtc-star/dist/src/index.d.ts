import { Multiaddr } from '@multiformats/multiaddr';
import { WebRTCInitiator } from '@libp2p/webrtc-peer';
import { EventEmitter } from '@libp2p/interfaces/events';
import type { Startable } from '@libp2p/interfaces/startable';
import { symbol } from '@libp2p/interfaces/transport';
import type { WRTC, WebRTCInitiatorInit, WebRTCReceiver, WebRTCReceiverInit } from '@libp2p/webrtc-peer';
import type { Connection } from '@libp2p/interfaces/connection';
import type { Transport, MultiaddrConnection, Listener, DialOptions, CreateListenerOptions } from '@libp2p/interfaces/transport';
import type { PeerDiscovery } from '@libp2p/interfaces/peer-discovery';
import type { WebRTCStarSocket, HandshakeSignal } from '@libp2p/webrtc-star-protocol';
import { Components, Initializable } from '@libp2p/interfaces/components';
export interface WebRTCStarInit {
    wrtc?: WRTC;
}
export interface WebRTCStarDialOptions extends DialOptions {
    channelOptions?: WebRTCInitiatorInit;
}
export interface WebRTCStarListenerOptions extends CreateListenerOptions, WebRTCInitiatorInit {
    channelOptions?: WebRTCReceiverInit;
}
export interface SignalServerServerEvents {
    'error': CustomEvent<Error>;
    'listening': CustomEvent;
    'peer': CustomEvent<string>;
    'connection': CustomEvent<Connection>;
}
export interface SignalServer extends EventEmitter<SignalServerServerEvents> {
    signallingAddr: Multiaddr;
    socket: WebRTCStarSocket;
    connections: MultiaddrConnection[];
    channels: Map<string, WebRTCReceiver>;
    pendingSignals: Map<string, HandshakeSignal[]>;
    close: () => Promise<void>;
}
/**
 * @class WebRTCStar
 */
export declare class WebRTCStar implements Transport, Initializable {
    wrtc?: WRTC;
    discovery: PeerDiscovery & Startable;
    sigServers: Map<string, SignalServer>;
    private components;
    constructor(options?: WebRTCStarInit);
    get [symbol](): true;
    get [Symbol.toStringTag](): string;
    init(components: Components): void;
    dial(ma: Multiaddr, options: WebRTCStarDialOptions): Promise<Connection>;
    _connect(ma: Multiaddr, options: WebRTCStarDialOptions): Promise<WebRTCInitiator>;
    /**
     * Creates a WebrtcStar listener. The provided `handler` function will be called
     * anytime a new incoming Connection has been successfully upgraded via
     * `upgrader.upgradeInbound`.
     */
    createListener(options: WebRTCStarListenerOptions): Listener;
    /**
     * Takes a list of `Multiaddr`s and returns only valid TCP addresses
     */
    filter(multiaddrs: Multiaddr[]): Multiaddr[];
    peerDiscovered(maStr: string): void;
}
//# sourceMappingURL=index.d.ts.map